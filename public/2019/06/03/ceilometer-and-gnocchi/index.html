<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Ceilometer and Gnocchi Install | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="此篇說明如何安裝 ceilometer  和 gnocchi 注意事項在安裝過程發現 Queens 版官方的套件有問題，導致在安裝 gnocchi-api 時會有python2 和 python3 套件衝突，導致刪除 cinder-api、 keystone、libapache2-mod-wsgi、 nova-placement-api、 openstack-dashboard，因此需要加入新的">
<meta name="keywords" content="OpenStack">
<meta property="og:type" content="article">
<meta property="og:title" content="Ceilometer and Gnocchi Install">
<meta property="og:url" content="http://yoursite.com/2019/06/03/ceilometer-and-gnocchi/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="此篇說明如何安裝 ceilometer  和 gnocchi 注意事項在安裝過程發現 Queens 版官方的套件有問題，導致在安裝 gnocchi-api 時會有python2 和 python3 套件衝突，導致刪除 cinder-api、 keystone、libapache2-mod-wsgi、 nova-placement-api、 openstack-dashboard，因此需要加入新的">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-06-03T03:45:02.735Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ceilometer and Gnocchi Install">
<meta name="twitter:description" content="此篇說明如何安裝 ceilometer  和 gnocchi 注意事項在安裝過程發現 Queens 版官方的套件有問題，導致在安裝 gnocchi-api 時會有python2 和 python3 套件衝突，導致刪除 cinder-api、 keystone、libapache2-mod-wsgi、 nova-placement-api、 openstack-dashboard，因此需要加入新的">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-ceilometer-and-gnocchi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/03/ceilometer-and-gnocchi/" class="article-date">
  <time datetime="2019-06-03T03:45:02.743Z" itemprop="datePublished">2019-06-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Ceilometer and Gnocchi Install
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>此篇說明如何安裝 ceilometer  和 gnocchi</p>
<h2 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項"></a>注意事項</h2><p>在安裝過程發現 Queens 版官方的套件有問題，導致在安裝 gnocchi-api 時會有python2 和 python3 套件衝突，導致刪除 cinder-api、 keystone、libapache2-mod-wsgi、 nova-placement-api、 openstack-dashboard，因此需要加入新的 repository</p>
<a id="more"></a>
<p>Ubuntu 16.04版本要安裝 gnocchi-api 需要加入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">add-apt-repository cloud-archive:queens-proposed</span><br></pre></td></tr></table></figure>

<p>官方 BUG: : <a href="https://bugs.launchpad.net/ubuntu/+source/gnocchi/+bug/1746992" target="_blank" rel="noopener">https://bugs.launchpad.net/ubuntu/+source/gnocchi/+bug/1746992</a></p>
<h2 id="建立資料庫"><a href="#建立資料庫" class="headerlink" title="建立資料庫"></a>建立資料庫</h2><p>請注意你的使用者和密碼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># mysql -u root -p</span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE gnocchi;</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON gnocchi.* TO &apos;gnocchi&apos;@&apos;localhost&apos; \</span><br><span class="line">  IDENTIFIED BY &apos;GNOCCHI_DBPASS&apos;;</span><br><span class="line">  </span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON gnocchi.* TO &apos;gnocchi&apos;@&apos;%&apos; \</span><br><span class="line">  IDENTIFIED BY &apos;GNOCCHI_DBPASS&apos;;</span><br></pre></td></tr></table></figure>

<h2 id="建立服務"><a href="#建立服務" class="headerlink" title="建立服務"></a>建立服務</h2><p>建立 OpenStack gnocchi 和 ceilometer 使用者及服務</p>
<p>請將  $ALL_HOST 改為 controller IP</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># openstack user create --domain default --password-prompt ceilometer</span><br><span class="line"># openstack user create --domain default --password-prompt gnocchi</span><br><span class="line"></span><br><span class="line"># openstack role add --project service --user ceilometer admin</span><br><span class="line"># openstack role add --project service --user gnocchi admin</span><br><span class="line"></span><br><span class="line"># openstack service create --name gnocchi --description &quot;Metric Service&quot; metric</span><br><span class="line"></span><br><span class="line"># openstack endpoint create --region RegionOne metric public http://$ALL_HOST:8041</span><br><span class="line"># openstack endpoint create --region RegionOne metric internal http://$ALL_HOST:8041</span><br><span class="line"># openstack endpoint create --region RegionOne metric admin http://$ALL_HOST:8041</span><br></pre></td></tr></table></figure>

<h2 id="修改-gnocchi-conf"><a href="#修改-gnocchi-conf" class="headerlink" title="修改 gnocchi.conf"></a>修改 gnocchi.conf</h2><p>修改 /etc/gnocchi/gnocchi.conf</p>
<p>根據你的環境，修改下面參數</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">transport_url = rabbit://openstack:openstack@192.168.1.10</span><br><span class="line"></span><br><span class="line">[api]</span><br><span class="line">auth_mode = keystone</span><br><span class="line">middlewares = oslo_middleware.cors.CORS</span><br><span class="line">middlewares = keystonemiddleware.auth_token.AuthProtocol</span><br><span class="line">auth_mode = keystone</span><br><span class="line"></span><br><span class="line">[indexer]</span><br><span class="line">url = mysql+pymysql://openstack:openstack@192.168.1.10/gnocchi</span><br><span class="line"></span><br><span class="line">[keystone_authtoken]</span><br><span class="line">auth_host = http://192.168.1.10:5000/v3/</span><br><span class="line">auth_protocol = http</span><br><span class="line">admin_user = admin</span><br><span class="line">admin_password = openstack</span><br><span class="line">admin_tenant_name = admin</span><br><span class="line">auth_url = http://192.168.1.10:5000/v3</span><br><span class="line">auth_type = password</span><br><span class="line">project_domain_name = default</span><br><span class="line">user_domain_name = default</span><br><span class="line">project_name = service</span><br><span class="line">username = gnocchi</span><br><span class="line">password = openstack</span><br><span class="line">interface = internalURL</span><br><span class="line">region_name = RegionOne</span><br><span class="line"></span><br><span class="line">[storage]</span><br><span class="line">coordination_url = file:///var/lib/gnocchi/locks</span><br><span class="line">file_basepath = /var/lib/gnocchi</span><br><span class="line">driver = file</span><br></pre></td></tr></table></figure>

<h2 id="新增-gnocchi-api-conf"><a href="#新增-gnocchi-api-conf" class="headerlink" title="新增 gnocchi-api.conf"></a>新增 gnocchi-api.conf</h2><p>新增 /etc/apache2/sites-available/gnocchi-api.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Listen 8041</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:8041&gt;</span><br><span class="line">    WSGIDaemonProcess gnocchi processes=2 threads=10 user=gnocchi display-name=%&#123;GROUP&#125;</span><br><span class="line">    WSGIProcessGroup gnocchi</span><br><span class="line">    WSGIScriptAlias / /usr/bin/gnocchi-api</span><br><span class="line">    WSGIApplicationGroup %&#123;GLOBAL&#125;</span><br><span class="line">    &lt;IfVersion &gt;= 2.4&gt;</span><br><span class="line">        ErrorLogFormat &quot;%&#123;cu&#125;t %M&quot;</span><br><span class="line">    &lt;/IfVersion&gt;</span><br><span class="line">    ErrorLog /var/log/apache2/gnocchi_error.log</span><br><span class="line">    CustomLog /var/log/apache2/gnocchi_access.log combined</span><br><span class="line">    &lt;Directory /&gt;</span><br><span class="line">        &lt;IfVersion &gt;= 2.4&gt;</span><br><span class="line">            Require all granted</span><br><span class="line">        &lt;/IfVersion&gt;</span><br><span class="line">        &lt;IfVersion &lt; 2.4&gt;</span><br><span class="line">            Order allow,deny</span><br><span class="line">            Allow from all</span><br><span class="line">        &lt;/IfVersion&gt;</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>

<h2 id="建立-gnocchi-資料表"><a href="#建立-gnocchi-資料表" class="headerlink" title="建立 gnocchi 資料表"></a>建立 gnocchi 資料表</h2><p>使用 gnocchi-upgrade 建立資料表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># gnocchi-upgrade</span><br></pre></td></tr></table></figure>

<h2 id="重啟-gnocchi-服務"><a href="#重啟-gnocchi-服務" class="headerlink" title="重啟 gnocchi 服務"></a>重啟 gnocchi 服務</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># service apache2 restart</span><br><span class="line"># service gnocchi-metricd restart</span><br></pre></td></tr></table></figure>

<h2 id="修改-var-lib-gnocchi-權限"><a href="#修改-var-lib-gnocchi-權限" class="headerlink" title="修改 /var/lib/gnocchi 權限"></a>修改 /var/lib/gnocchi 權限</h2><p>請將 /var/lib/gnocchi 權限設為 gnocchi</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># chown -R gnocchi:gnocchi /var/lib/gnocchi</span><br></pre></td></tr></table></figure>

<h2 id="修改-admin-openrc"><a href="#修改-admin-openrc" class="headerlink" title="修改 admin-openrc"></a>修改 admin-openrc</h2><p>如果要使用 gnocchi 的指令，需要將 admin-openrc 加入以下參數，才能使用指令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export OS_AUTH_TYPE=password</span><br></pre></td></tr></table></figure>

<h2 id="安裝-ceilometer"><a href="#安裝-ceilometer" class="headerlink" title="安裝 ceilometer"></a>安裝 ceilometer</h2><h3 id="Controller-節點"><a href="#Controller-節點" class="headerlink" title="Controller 節點"></a>Controller 節點</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># apt install -y ceilometer-agent-notification ceilometer-agent-central</span><br></pre></td></tr></table></figure>

<h4 id="修改-ceilometer-conf"><a href="#修改-ceilometer-conf" class="headerlink" title="修改 ceilometer.conf"></a>修改 ceilometer.conf</h4><p>跟據環境，修改以下參數</p>
<p>修改 /etc/ceilometer/ceilometer.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">transport_url = rabbit://openstack:openstack@192.168.1.10</span><br><span class="line"></span><br><span class="line">[dispatcher_gnocchi]</span><br><span class="line">filter_service_activity = False</span><br><span class="line">archive_policy = high</span><br><span class="line"></span><br><span class="line">[service_credentials]</span><br><span class="line">auth_url = http://10.50.2.10:5000/v3</span><br><span class="line">auth_type = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = ceilometer</span><br><span class="line">password = openstack</span><br><span class="line">interface = internalURL</span><br><span class="line">region_name = RegionOne</span><br></pre></td></tr></table></figure>

<h4 id="建立-ceilometer-resource"><a href="#建立-ceilometer-resource" class="headerlink" title="建立 ceilometer resource"></a>建立 ceilometer resource</h4><p>在 gnocchi 裡建立 ceilometer 的 resource</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ceilometer-upgrade</span><br></pre></td></tr></table></figure>

<h4 id="重啟-ceilometer-服務"><a href="#重啟-ceilometer-服務" class="headerlink" title="重啟 ceilometer 服務"></a>重啟 ceilometer 服務</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># service ceilometer-agent-central restart</span><br><span class="line"># service ceilometer-agent-notification restart</span><br></pre></td></tr></table></figure>

<h4 id="修改-glance-api-conf-和-glance-registry-conf"><a href="#修改-glance-api-conf-和-glance-registry-conf" class="headerlink" title="修改 glance-api.conf 和 glance-registry.conf"></a>修改 glance-api.conf 和 glance-registry.conf</h4><p>修改 /etc/glance/glance-api.conf 和 /etc/glance/glance-registry.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">transport_url = rabbit://openstack:openstack@192.168.1.10</span><br><span class="line"></span><br><span class="line">[oslo_messaging_notifications]</span><br><span class="line">driver = messagingv2</span><br></pre></td></tr></table></figure>

<h4 id="修改-neutron-conf"><a href="#修改-neutron-conf" class="headerlink" title="修改 neutron.conf"></a>修改 neutron.conf</h4><p>修改 /etc/neutron/neutron.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[oslo_messaging_notifications]</span><br><span class="line">driver = messagingv2</span><br></pre></td></tr></table></figure>

<h4 id="修改-cinder-conf"><a href="#修改-cinder-conf" class="headerlink" title="修改 cinder.conf"></a>修改 cinder.conf</h4><p>修改 /etc/cinder/cinder.conf (volume節點上的也需要修改)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[oslo_messaging_notifications]</span><br><span class="line">driver = messagingv2</span><br></pre></td></tr></table></figure>

<h4 id="修改-heat-conf"><a href="#修改-heat-conf" class="headerlink" title="修改 heat.conf"></a>修改 heat.conf</h4><p>修改 /etc/heat/heat.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[oslo_messaging_notifications]</span><br><span class="line">driver = messagingv2</span><br></pre></td></tr></table></figure>

<h4 id="重啟上述服務"><a href="#重啟上述服務" class="headerlink" title="重啟上述服務"></a>重啟上述服務</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># service glance-registry restart</span><br><span class="line"># service glance-api restart</span><br><span class="line"></span><br><span class="line"># service neutron-server restart</span><br><span class="line"></span><br><span class="line"># service apache2 restart</span><br><span class="line"># service cinder-api restart</span><br><span class="line"># service cinder-scheduler restart</span><br><span class="line"># service cinder-volume restart</span><br><span class="line"></span><br><span class="line"># service heat-api restart</span><br><span class="line"># service heat-api-cfn restart</span><br><span class="line"># service heat-engine restart</span><br></pre></td></tr></table></figure>

<h3 id="Compute-節點"><a href="#Compute-節點" class="headerlink" title="Compute 節點"></a>Compute 節點</h3><p>安裝 ceilometer-agent-compute</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># apt-get install ceilometer-agent-compute</span><br></pre></td></tr></table></figure>

<h4 id="修改-ceilometer-conf-1"><a href="#修改-ceilometer-conf-1" class="headerlink" title="修改 ceilometer.conf"></a>修改 ceilometer.conf</h4><p>根據環境，修改以下參數</p>
<p>修改 /etc/ceilometer/ceilometer.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">transport_url = rabbit://openstack:openstack@192.168.1.10</span><br><span class="line">[service_credentials]</span><br><span class="line">auth_url = http://10.50.2.10:5000/v3</span><br><span class="line">auth_type = password</span><br><span class="line">project_domain_id = default</span><br><span class="line">user_domain_id = default</span><br><span class="line">project_name = service</span><br><span class="line">username = ceilometer</span><br><span class="line">password = openstack</span><br><span class="line">interface = internalURL</span><br><span class="line">region_name = RegionOne</span><br></pre></td></tr></table></figure>

<h4 id="修改-nova-conf"><a href="#修改-nova-conf" class="headerlink" title="修改 nova.conf"></a>修改 nova.conf</h4><p>修改 /etc/nova/nova.conf</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">instance_usage_audit = True</span><br><span class="line">instance_usage_audit_period = hour</span><br><span class="line">notify_on_state_change = vm_and_task_state</span><br><span class="line"></span><br><span class="line">[oslo_messaging_notifications]</span><br><span class="line">driver = messagingv2</span><br></pre></td></tr></table></figure>

<h4 id="重啟服務"><a href="#重啟服務" class="headerlink" title="重啟服務"></a>重啟服務</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># service ceilometer-agent-compute restart</span><br><span class="line"># service nova-compute restart</span><br></pre></td></tr></table></figure>

<h2 id="修改-polling-yaml"><a href="#修改-polling-yaml" class="headerlink" title="修改 polling.yaml"></a>修改 polling.yaml</h2><p>為了監測 VM 的 disk，增加下列至 /etc/ceilometer/polling.yaml 的 some_pollsters</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- disk.usage</span><br><span class="line">- disk.device.usage</span><br><span class="line">- disk.device.read.bytes</span><br><span class="line">- disk.device.read.requests</span><br><span class="line">- disk.device.write.bytes</span><br><span class="line">- disk.device.write.requests</span><br></pre></td></tr></table></figure>

<h2 id="其他事項"><a href="#其他事項" class="headerlink" title="其他事項"></a>其他事項</h2><p>監測的間隔預設為5分鐘，政策為 low，可以使用 gnocchi 查看其他監測的政策，預設有三種: low, medium , high ，granularity 為間隔時間，也可以建立自己的政策，目前尚未嘗試。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># gnocchi archive-policy list</span><br><span class="line">+--------+-------------+-----------------------------------------------------------------------+---------------------------------+</span><br><span class="line">| name   | back_window | definition                                                            | aggregation_methods             |</span><br><span class="line">+--------+-------------+-----------------------------------------------------------------------+---------------------------------+</span><br><span class="line">| bool   |        3600 | - points: 31536000, granularity: 0:00:01, timespan: 365 days, 0:00:00 | last                            |</span><br><span class="line">| high   |           0 | - points: 3600, granularity: 0:00:01, timespan: 1:00:00               | std, count, min, max, sum, mean |</span><br><span class="line">|        |             | - points: 10080, granularity: 0:01:00, timespan: 7 days, 0:00:00      |                                 |</span><br><span class="line">|        |             | - points: 8760, granularity: 1:00:00, timespan: 365 days, 0:00:00     |                                 |</span><br><span class="line">| low    |           0 | - points: 8640, granularity: 0:05:00, timespan: 30 days, 0:00:00      | std, count, min, max, sum, mean |</span><br><span class="line">| medium |           0 | - points: 10080, granularity: 0:01:00, timespan: 7 days, 0:00:00      | std, count, min, max, sum, mean |</span><br><span class="line">|        |             | - points: 8760, granularity: 1:00:00, timespan: 365 days, 0:00:00     |                                 |</span><br><span class="line">+--------+-------------+-----------------------------------------------------------------------+---------------------------------+</span><br></pre></td></tr></table></figure>

<p>若要修改間隔，請修改 ceilometer.conf 的 [dispatcher_gnocchi]，以及/etc/ceilometer/polling.yaml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[dispatcher_gnocchi]</span><br><span class="line">archive_policy = high</span><br></pre></td></tr></table></figure>

<p>polling.yaml (interval原為300，compute上的也要修改)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sources:</span><br><span class="line">    - name: some_pollsters</span><br><span class="line">      interval: 60</span><br></pre></td></tr></table></figure>

<p>conteroller 重啟服務</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># service ceilometer-agent-central restart</span><br><span class="line"># service ceilometer-agent-notification restart</span><br></pre></td></tr></table></figure>

<p>compute 重啟服務</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># service ceilometer-agent-compute restart</span><br></pre></td></tr></table></figure>

<p>透過 gnocchi 的指令，可以取得 VM 的監控值，用 resource show –type instance VM_UUID， 可以得到此 VM 的各資源監測的 ID</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"># gnocchi resource show --type instance 7e157c6a-7b2a-4893-8819-bfc033e37f39</span><br><span class="line">+-----------------------+---------------------------------------------------------------------+</span><br><span class="line">| Field                 | Value                                                               |</span><br><span class="line">+-----------------------+---------------------------------------------------------------------+</span><br><span class="line">| created_by_project_id | 6b53bd8ecb01408d8d76a48ae3878723                                    |</span><br><span class="line">| created_by_user_id    | 3942272c165f4c258663ed130e8171e2                                    |</span><br><span class="line">| creator               | 3942272c165f4c258663ed130e8171e2:6b53bd8ecb01408d8d76a48ae3878723   |</span><br><span class="line">| display_name          | test                                                                |</span><br><span class="line">| ended_at              | None                                                                |</span><br><span class="line">| flavor_id             | 2                                                                   |</span><br><span class="line">| flavor_name           | m1.small                                                            |</span><br><span class="line">| host                  | compute1                                                            |</span><br><span class="line">| id                    | 7e157c6a-7b2a-4893-8819-bfc033e37f39                                |</span><br><span class="line">| image_ref             | None                                                                |</span><br><span class="line">| metrics               | compute.instance.booting.time: 53c30c1e-1c84-4946-8171-b15afe0ddfbd |</span><br><span class="line">|                       | cpu.delta: 732c0318-195c-4735-a0db-0866cfb88189                     |</span><br><span class="line">|                       | cpu: 2a273f20-917c-46f4-95b7-934c57ebd148                           |</span><br><span class="line">|                       | cpu_l3_cache: f032f4e9-8947-4096-9fcd-222e93b255ef                  |</span><br><span class="line">|                       | cpu_util: 4a0d8c08-56b1-47f7-8dc9-3fa8d56c53df                      |</span><br><span class="line">|                       | disk.allocation: 063b2800-e26e-45ae-8840-8d53976743b1               |</span><br><span class="line">|                       | disk.capacity: df6d2a85-19ec-4a69-8409-b2d56222635e                 |</span><br><span class="line">|                       | disk.ephemeral.size: c04d6e90-dca6-454c-8be8-29d2ca765b89           |</span><br><span class="line">|                       | disk.iops: cc8605a9-6687-42fd-af92-1372ae9692dc                     |</span><br><span class="line">|                       | disk.latency: 6d1205a6-8e6b-45ce-a4b5-a48f62b26880                  |</span><br><span class="line">|                       | disk.read.bytes.rate: d9f5dbc8-24c5-40e5-88f4-0b9c36bfd197          |</span><br><span class="line">|                       | disk.read.bytes: 8ff22fe3-c91a-41de-b7f6-06ce77098b79               |</span><br><span class="line">|                       | disk.read.requests.rate: 7b820453-7455-40f2-8808-7437651fc351       |</span><br><span class="line">|                       | disk.read.requests: 60e98d20-36b0-4fe8-adf3-86e827be15d4            |</span><br><span class="line">|                       | disk.root.size: 8da968ca-9703-4625-b7c3-8f13460dae77                |</span><br><span class="line">|                       | disk.usage: 8046e635-bfa6-45e5-bc28-a8ce8aefeefa                    |</span><br><span class="line">|                       | disk.write.bytes.rate: b186f91d-f61c-40a3-8577-a0e443b92f7a         |</span><br><span class="line">|                       | disk.write.bytes: 9c414ba1-597e-4bda-a154-c0131af03505              |</span><br><span class="line">|                       | disk.write.requests.rate: 235445a2-d278-4a55-955b-ab1e6a5c567a      |</span><br><span class="line">|                       | disk.write.requests: 8cf3b36b-c4f0-4b30-bcce-9463b89e2e3a           |</span><br><span class="line">|                       | memory.bandwidth.local: 054870ba-06e6-473f-a37b-e7efcf9188e9        |</span><br><span class="line">|                       | memory.bandwidth.total: ee244a7a-1532-40db-8fb1-96bfcfdee2d9        |</span><br><span class="line">|                       | memory.resident: a045ff95-c7e5-4162-9345-ac68a2993981               |</span><br><span class="line">|                       | memory.swap.in: 6162d2f2-6f6c-4fab-99e5-b4fbb9a8844e                |</span><br><span class="line">|                       | memory.swap.out: a6d9846c-ffd9-471f-8175-4c900af55c99               |</span><br><span class="line">|                       | memory.usage: 8b8706a2-d108-445c-8a22-c8dcab2d4950                  |</span><br><span class="line">|                       | memory: 3d2e70c8-7fd2-4557-b30c-3090749c5014                        |</span><br><span class="line">|                       | perf.cache.misses: dae14570-1c80-472b-9bb2-9818921d03cd             |</span><br><span class="line">|                       | perf.cache.references: 0a294dea-decf-4707-8b4d-9ef92ffc2e87         |</span><br><span class="line">|                       | perf.cpu.cycles: be19335c-9873-4c9d-9011-0e4ef9931ab4               |</span><br><span class="line">|                       | perf.instructions: d5d99bcc-044f-4543-a27f-7526a35826b9             |</span><br><span class="line">|                       | vcpus: 6e2b7fd0-3fbd-4481-843f-cd705408cb05                         |</span><br><span class="line">| original_resource_id  | 7e157c6a-7b2a-4893-8819-bfc033e37f39                                |</span><br><span class="line">| project_id            | 885c63821c3a43a78da157958eca3a99                                    |</span><br><span class="line">| revision_end          | None                                                                |</span><br><span class="line">| revision_start        | 2018-05-03T06:51:06.014722+00:00                                    |</span><br><span class="line">| server_group          | None                                                                |</span><br><span class="line">| started_at            | 2018-05-03T06:51:06.014643+00:00                                    |</span><br><span class="line">| type                  | instance                                                            |</span><br><span class="line">| user_id               | be23e663a2ef4873bbbfee411b421049                                    |</span><br><span class="line">+-----------------------+---------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<p>再透過 gnocchi measures show METRICS_ID，查詢上面的 metrics 的監測值，例如要查詢上述 VM 的 cpu_util (CPU 使用率)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># gnocchi measures show 4a0d8c08-56b1-47f7-8dc9-3fa8d56c53df</span><br><span class="line">+---------------------------+-------------+-----------------+</span><br><span class="line">| timestamp                 | granularity |           value |</span><br><span class="line">+---------------------------+-------------+-----------------+</span><br><span class="line">| 2018-05-03T13:24:00+00:00 |        60.0 |  0.149982089639 |</span><br><span class="line">| 2018-05-03T13:25:00+00:00 |        60.0 |  0.166708385488 |</span><br><span class="line">| 2018-05-03T13:26:00+00:00 |        60.0 |   0.14998932576 |</span><br><span class="line">| 2018-05-03T13:27:00+00:00 |        60.0 |  0.149992996335 |</span><br><span class="line">| 2018-05-03T13:28:00+00:00 |        60.0 |  0.133337124552 |</span><br><span class="line">| 2018-05-03T13:29:00+00:00 |        60.0 |  0.166712370593 |</span><br><span class="line">| 2018-05-03T13:30:00+00:00 |        60.0 |  0.150029974686 |</span><br><span class="line">+---------------------------+-------------+-----------------+</span><br></pre></td></tr></table></figure>

<p>若要取得 VM 網路的監測值，使用 gnocchi resource list –type instance_network_interface， 取得 ID</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># gnocchi resource list --type instance_network_interface | grep 7e157c6a-7b2a-4893-8819-bfc033e37f39</span><br><span class="line">+--------------------------------------+----------------------------+----------------------------------+----------------------------------+-----------------------------------------------------------------------+----------------------------------+----------------------------------+----------------------------------+--------------+--------------------------------------+-------------------------------------------------------------------+----------------+</span><br><span class="line">| id                                   | type                       | project_id                       | user_id                          | original_resource_id                                                  | started_at                       | ended_at                         | revision_start                   | revision_end | instance_id                          | creator                                                           | name           |</span><br><span class="line">+--------------------------------------+----------------------------+----------------------------------+----------------------------------+-----------------------------------------------------------------------+----------------------------------+----------------------------------+----------------------------------+--------------+--------------------------------------+-------------------------------------------------------------------+----------------+</span><br><span class="line"></span><br><span class="line">| 06d1109b-fc23-5369-947d-564aff231fc4 | instance_network_interface | 885c63821c3a43a78da157958eca3a99 | be23e663a2ef4873bbbfee411b421049 | instance-00000011-7e157c6a-7b2a-4893-8819-bfc033e37f39-tap594786b7-d9 | 2018-05-03T06:51:55.592433+00:00 | None                             | 2018-05-03T06:51:55.592459+00:00 | None         | 7e157c6a-7b2a-4893-8819-bfc033e37f39 | 3942272c165f4c258663ed130e8171e2:6b53bd8ecb01408d8d76a48ae3878723 | tap594786b7-d9 |</span><br></pre></td></tr></table></figure>

<p>再使用 gnocchi resource show 取得監測資源 ID</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># gnocchi resource show --type instance_network_interface 06d1109b-fc23-5369-947d-564aff231fc4</span><br><span class="line">+-----------------------+-----------------------------------------------------------------------+</span><br><span class="line">| Field                 | Value                                                                 |</span><br><span class="line">+-----------------------+-----------------------------------------------------------------------+</span><br><span class="line">| created_by_project_id | 6b53bd8ecb01408d8d76a48ae3878723                                      |</span><br><span class="line">| created_by_user_id    | 3942272c165f4c258663ed130e8171e2                                      |</span><br><span class="line">| creator               | 3942272c165f4c258663ed130e8171e2:6b53bd8ecb01408d8d76a48ae3878723     |</span><br><span class="line">| ended_at              | None                                                                  |</span><br><span class="line">| id                    | 06d1109b-fc23-5369-947d-564aff231fc4                                  |</span><br><span class="line">| instance_id           | 7e157c6a-7b2a-4893-8819-bfc033e37f39                                  |</span><br><span class="line">| metrics               | network.incoming.bytes.rate: e8c3d083-0ede-4719-a88a-eca92b653fed     |</span><br><span class="line">|                       | network.incoming.bytes: 92ccff55-2ba8-452a-9ca9-b11daf7a3e8c          |</span><br><span class="line">|                       | network.incoming.packets.drop: 889d6986-dfc6-40c7-a28c-d2543616d059   |</span><br><span class="line">|                       | network.incoming.packets.error: d3dc4693-b6cd-4c15-89e5-9bf92a2bcae0  |</span><br><span class="line">|                       | network.incoming.packets.rate: c6422bd1-cf03-4cfc-8e79-edd37851ae00   |</span><br><span class="line">|                       | network.incoming.packets: fd860305-7c1c-45fe-a3ef-a5e843f24e4b        |</span><br><span class="line">|                       | network.outgoing.bytes.rate: 1431543c-91ae-4aed-b506-330f18a18805     |</span><br><span class="line">|                       | network.outgoing.bytes: 4db6ea32-9ea3-4e7c-a881-40f0ef82203d          |</span><br><span class="line">|                       | network.outgoing.packets.drop: c49c0019-5a1a-4582-8abd-d82608a111a8   |</span><br><span class="line">|                       | network.outgoing.packets.error: 7e725029-d676-4c98-b1ea-d568d2bc80b0  |</span><br><span class="line">|                       | network.outgoing.packets.rate: bc28b58f-b848-48d3-bfd6-c3995b09a50e   |</span><br><span class="line">|                       | network.outgoing.packets: f7057ae3-0080-4f6f-8fdb-04b5129b7fd0        |</span><br><span class="line">| name                  | tap594786b7-d9                                                        |</span><br><span class="line">| original_resource_id  | instance-00000011-7e157c6a-7b2a-4893-8819-bfc033e37f39-tap594786b7-d9 |</span><br><span class="line">| project_id            | 885c63821c3a43a78da157958eca3a99                                      |</span><br><span class="line">| revision_end          | None                                                                  |</span><br><span class="line">| revision_start        | 2018-05-03T06:51:55.592459+00:00                                      |</span><br><span class="line">| started_at            | 2018-05-03T06:51:55.592433+00:00                                      |</span><br><span class="line">| type                  | instance_network_interface                                            |</span><br><span class="line">| user_id               | be23e663a2ef4873bbbfee411b421049                                      |</span><br><span class="line">+-----------------------+-----------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<p>接下來用gnocchi measures show METRICS_ID，根據上述的 ID 取得監測值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># gnocchi measures show 06d1109b-fc23-5369-947d-564aff231fc4</span><br><span class="line">+---------------------------+-------------+------------+</span><br><span class="line">| timestamp                 | granularity |    value   |</span><br><span class="line">+---------------------------+-------------+------------+</span><br><span class="line">| 2018-05-04T07:00:00+00:00 |        60.0 |   208353.0 |</span><br><span class="line">| 2018-05-04T07:01:00+00:00 |        60.0 |   209253.0 |</span><br><span class="line">| 2018-05-04T07:02:00+00:00 |        60.0 |   210153.0 |</span><br><span class="line">| 2018-05-04T07:03:00+00:00 |        60.0 |   211053.0 |</span><br><span class="line">| 2018-05-04T07:04:00+00:00 |        60.0 |   211953.0 |</span><br><span class="line">| 2018-05-04T07:05:00+00:00 |        60.0 |   212853.0 |</span><br><span class="line">| 2018-05-04T07:06:00+00:00 |        60.0 |   213753.0 |</span><br><span class="line">+---------------------------+-------------+------------+</span><br></pre></td></tr></table></figure>

<p>更快的查詢方式，根據VM ID查詢，查詢 instance 相關監測值: (resource-type 為 instance，最後面的參數為要查詢的 metrics，範例為 cpu_util)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># gnocchi measures aggregation --resource-type instance --query &apos;instance_id=&quot;7e157c6a-7b2a-4893-8819-bfc033e37f39&quot;&apos; --granularity 60 --aggregation mean -m cpu_util</span><br></pre></td></tr></table></figure>

<p>查詢 instance network interface 相關監測值:(resource-type為 instance_network_interface，最後面的參數為要查詢的metrics，  範例為network.incoming.bytes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># gnocchi measures aggregation --resource-type instance_network_interface  --query &apos;instance_id=&quot;7e157c6a-7b2a-4893-8819-bfc033e37f39&quot;&apos; --granularity 60 --aggregation mean -m network.incoming.bytes</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/03/ceilometer-and-gnocchi/" data-id="cjwftyqdq0001jfjx25lnnw2j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenStack/">OpenStack</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2019/06/03/aodh-install/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Aodh Install</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenStack/">OpenStack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/OpenStack/" style="font-size: 10px;">OpenStack</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/06/03/ceilometer-and-gnocchi/">Ceilometer and Gnocchi Install</a>
          </li>
        
          <li>
            <a href="/2019/06/03/aodh-install/">Aodh Install</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>